/**
 * macOS 设计系统 - 排版样式
 *
 * 设计理念:
 * - 基于 SF Pro 字体族
 * - 遵循 4px 网格系统的字号规范
 * - 字重层级清晰，功能明确
 * - 符合 Apple HIG 排版标准
 *
 * 核心原则:
 * 1. 可读性 (Readability) - 1.4 基础行高
 * 2. 层级感 (Hierarchy) - 视觉权重区分
 * 3. 一致性 (Consistency) - 跨界面统一
 * 4. 可访问性 (Accessibility) - WCAG AA 标准
 *
 * @category: Typography
 * @order: 2
 * @author: Senior Full Stack Engineer
 */

/* ========================================
 * 字体定义
 * ======================================== */

:root {
  /* 字体族 - 优先使用系统字体 */
  --font-sans: -apple-system, BlinkMacSystemFont, "SF Pro Display",
               "SF Pro Text", "Segoe UI", "PingFang SC",
               "Hiragino Sans GB", "Microsoft YaHei", sans-serif;

  /* 符号字体 */
  --font-symbols: "SF Pro Symbols", -apple-system, sans-serif;

  /* ========================================
   * 字重系统 - iOS/macOS 标准字重
   * ======================================== */

  --font-weight-thin: 100;        /* 超细 - 仅用于大字号标题 */
  --font-weight-light: 300;      /* 细体 - 装饰性标题 */
  --font-weight-regular: 400;    /* 常规 - 基础正文 */
  --font-weight-medium: 500;     /* 中等 - 强调文本 */
  --font-weight-semibold: 600;   /* 半粗 - 标题 */
  --font-weight-bold: 700;       /* 粗体 - 重点标题 */

  /* ========================================
   * 字号系统 - 基于 4px 网格
   * ======================================== */

  /* 辅助文本 (11-12px) */
  --text-xs: 11px;               /* 标签、辅助信息 */
  --text-sm: 12px;               /* 副标题、统计 */

  /* 正文 (13-16px) */
  --text-base: 13px;             /* macOS 默认 - 界面正文 */
  --text-md: 14px;               /* 强调正文、内容 */
  --text-lg: 16px;               /* 短段落、说明 */

  /* 标题 (18-24px) */
  --text-xl: 18px;               /* 卡片标题 */
  --text-2xl: 20px;              /* 页面标题 */
  --text-3xl: 24px;              /* 大标题 */

  /* 展示文本 (28-32px+) */
  --text-4xl: 28px;              /* 主要展示 */
  --text-5xl: 32px;              /* 特大展示 */

  /* ========================================
   * 行高系统 - 基于字号计算
   * ======================================== */

  --leading-tight: 1.2;          /* 紧凑 - 标题、短文本 */
  --leading-normal: 1.4;         /* 常规 - 界面正文 */
  --leading-relaxed: 1.6;        /* 宽松 - 长内容 */

  /* ========================================
   * 字符间距
   * ======================================== */

  --tracking-tight: -0.02em;     /* 紧凑标题 */
  --tracking-normal: 0;          /* 常规文本 */
  --tracking-wide: 0.02em;       /* 大写标签 */

  /* ========================================
   * 文本颜色透明度
   * ======================================== */

  --text-opacity-primary: 0.87;   /* 主要文本 87% */
  --text-opacity-secondary: 0.60; /* 次要文本 60% */
  --text-opacity-tertiary: 0.38;  /* 三级文本 38% */
  --text-opacity-disabled: 0.25;  /* 禁用文本 25% */
}

/* ========================================
 * 基础文本样式
 * ======================================== */

/* 自动应用的全局文本设置 */
body,
input,
textarea,
select,
button {
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ========================================
 * 排版层级系统 - Text Styles
 * ======================================== */

/* 1. 辅助文本 (Labels, Metadata) */
.text-xs {
  font-size: var(--text-xs);
  font-weight: var(--font-weight-medium);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-wide);
  color: var(--macos-text-tertiary);
}

.text-sm {
  font-size: var(--text-sm);
  font-weight: var(--font-weight-regular);
  line-height: var(--leading-tight);
  color: var(--macos-text-secondary);
}

/* 2. 基础正文 (Body Text) */
.text-base {
  font-size: var(--text-base);
  font-weight: var(--font-weight-regular);
  line-height: var(--leading-normal);
  color: var(--macos-text-primary);
}

/* 3. 强调正文 (Emphasized Body) */
.text-md {
  font-size: var(--text-md);
  font-weight: var(--font-weight-regular);
  line-height: var(--leading-normal);
  color: var(--macos-text-primary);
}

.text-lg {
  font-size: var(--text-lg);
  font-weight: var(--font-weight-regular);
  line-height: var(--leading-normal);
  color: var(--macos-text-primary);
}

/* 4. 辅助文本 (Muted/Secondary) */
.text-muted {
  font-size: var(--text-base);
  font-weight: var(--font-weight-regular);
  line-height: var(--leading-normal);
  color: var(--macos-text-secondary);
}

.text-muted-strong {
  color: var(--macos-text-secondary);
}

.text-muted-weak {
  color: var(--macos-text-tertiary);
}

/* ========================================
 * 标题层级系统 - Headings
 * ======================================== */

/* 1. 卡片标题 */
.title-xl {
  font-size: var(--text-xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
  color: var(--macos-text-primary);
  margin: 0 0 var(--space-2) 0;
}

/* 2. 页面标题 */
.title-2xl {
  font-size: var(--text-2xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
  color: var(--macos-text-primary);
  margin: 0 0 var(--space-3) 0;
}

/* 3. 大标题 */
.title-3xl {
  font-size: var(--text-3xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
  color: var(--macos-text-primary);
  margin: 0 0 var(--space-4) 0;
}

/* 4. 展示标题 (Hero) */
.title-4xl {
  font-size: var(--text-4xl);
  font-weight: var(--font-weight-semibold);
  line-height: var(--leading-tight);
  letter-spacing: var(--tracking-tight);
  color: var(--macos-text-primary);
  margin: 0 0 var(--space-4) 0;
}

/* 5. 超大展示 */
.title-5xl {
  font-size: var(--text-5xl);
  font-weight: var(--font-weight-bold);
  line-height: 1.1;
  letter-spacing: var(--tracking-tight);
  color: var(--macos-text-primary);
  margin: 0 0 var(--space-5) 0;
}

/* ========================================
 * 特殊排版样式
 * ======================================== */

/* 标签系统 (Uppercase) */
.label {
  font-size: var(--text-xs);
  font-weight: var(--font-weight-medium);
  letter-spacing: var(--tracking-wide);
  text-transform: uppercase;
  color: var(--macos-text-tertiary);
}

/* 代码/数字Monospace */
.monospace {
  font-family: 'SF Mono', 'Menlo', 'Monaco', 'Courier New', monospace;
  font-size: 0.95em;
  letter-spacing: -0.01em;
}

/* 强调文本 - 系统蓝 */
.emphasis {
  color: var(--macos-accent-blue);
  font-weight: var(--font-weight-medium);
}

/* 正确内容 */
.success-text {
  color: var(--macos-success);
  font-weight: var(--font-weight-medium);
}

/* 警告内容 */
.warning-text {
  color: var(--macos-warning);
  font-weight: var(--font-weight-medium);
}

/* 错误内容 */
.error-text {
  color: var(--macos-error);
  font-weight: var(--font-weight-medium);
}

/* ========================================
 * 链接样式
 * ======================================== */

.link {
  color: var(--macos-accent-blue);
  text-decoration: none;
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: color var(--transition-fast);
}

.link:hover {
  color: var(--macos-accent-blue-hover);
  text-decoration: underline;
}

.link:active {
  color: var(--macos-accent-blue-active);
}

/* ========================================
 * 文本工具类
 * ======================================== */

/* 对齐 */
.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-justify { text-align: justify; }

/* 字重控制 */
.font-thin { font-weight: var(--font-weight-thin); }
.font-light { font-weight: var(--font-weight-light); }
.font-regular { font-weight: var(--font-weight-regular); }
.font-medium { font-weight: var(--font-weight-medium); }
.font-semibold { font-weight: var(--font-weight-semibold); }
.font-bold { font-weight: var(--font-weight-bold); }

/* 修饰 */
.italic { font-style: italic; }
.underline { text-decoration: underline; }
.line-through { text-decoration: line-through; }
.uppercase { text-transform: uppercase; }
.lowercase { text-transform: lowercase; }
.capitalize { text-transform: capitalize; }

/* 颜色 (直接使用系统色) */
.text-white { color: #FFFFFF; }
.text-black { color: #000000; }
.text-primary { color: var(--macos-text-primary); }
.text-secondary { color: var(--macos-text-secondary); }
.text-tertiary { color: var(--macos-text-tertiary); }
.text-accent { color: var(--macos-accent-blue); }

/* ========================================
 * Qt 组件特定排版
 * ======================================== */

/* 按钮文本 */
QPushButton {
  font-family: var(--font-sans);
  font-size: var(--text-base);
  font-weight: var(--font-weight-medium);
  letter-spacing: normal;
}

/* 导航项文本 (稍大) */
QPushButton[objectName="nav_button"] {
  font-size: var(--text-md);
}

/* 标签文本 */
QLabel {
  font-family: var(--font-sans);
  font-size: var(--text-base);
  color: var(--macos-text-primary);
}

/* 标题标签 */
QLabel[objectName="title"],
QLabel[objectName="heading"] {
  font-size: var(--text-xl);
  font-weight: var(--font-weight-semibold);
}

/* 小标签 */
QLabel.small {
  font-size: var(--text-sm);
  color: var(--macos-text-secondary);
}

/* 统计数字 */
QLabel[objectName="statistic"],
.statistic {
  font-family: var(--font-sans);
  font-size: var(--text-2xl);
  font-weight: var(--font-weight-medium);
  letter-spacing: var(--tracking-tight);
}

/* ========================================
 * 可访问性增强
 * ======================================== */

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  :root {
    --text-opacity-primary: 1;
    --text-opacity-secondary: 0.87;
  }

  .text-muted,
  .text-tertiary {
    opacity: 1;
  }
}

/* 减少动画模式 */
@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
    animation-duration: 0.01ms !important;
  }
}

/* 大字体支持 */
@media (min-width: 768px) {
  html {
    font-size: 18px; /* 增加基础字号 */
  }
}

/* ========================================
 * 专业排版模式
 * ======================================== */

/* 代码编辑器/日志专用 */
.prose {
  font-family: 'SF Mono', 'Menlo', 'Monaco', monospace;
  font-size: calc(var(--text-base) - 1px);
  line-height: 1.6;
  color: var(--macos-text-primary);
  background: var(--macos-background-tertiary);
  padding: var(--space-4);
  border-radius: var(--radius-md);
  overflow-x: auto;
}

/* 引用块 */
.blockquote {
  border-left: 3px solid var(--macos-accent-blue);
  padding-left: var(--space-4);
  margin: var(--space-4) 0;
  font-style: italic;
  color: var(--macos-text-secondary);
}

/* 数据表格中的文本 */
.table-text {
  font-size: var(--text-sm);
  font-weight: 400;
  letter-spacing: -0.01em;
}

/* ========================================
 * 响应式排版 (备用)
 * ======================================== */

/* 移动设备适配 */
@media (max-width: 768px) {
  :root {
    --text-base: 14px;    /* 增大正文 */
    --text-lg: 16px;
    --text-xl: 18px;
    --text-2xl: 20px;
    --text-3xl: 22px;
  }
}

/* ========================================
 * 暗色/亮色模式排版调整
 * ======================================== */

/* 亮色模式覆盖 */
[data-theme="light"] {
  /* 文本颜色在 reset.css 中已定义，这里仅调整特殊场景 */
}

/* ========================================
 * 性能优化
 * ======================================== */

/* 文本抗锯齿优化 */
.render-crisp {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: geometricPrecision;
}

/* 文本截断 */
.text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.text-ellipsis-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.text-ellipsis-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* ========================================
 * 最佳实践示例 (Documentation)
 * ======================================== */

/*
 * 排版使用示例:
 *
 * 1. 页面标题:
 *    <h1 class="title-2xl">页面标题</h1>
 *
 * 2. 卡片标题:
 *    <h2 class="title-xl">卡片标题</h2>
 *
 * 3. 正文段落:
 *    <p class="text-base">这里是正文内容...</p>
 *
 * 4. 辅助信息:
 *    <span class="text-sm text-muted">创建时间: 2025-12-17</span>
 *
 * 5. 标签/状态:
 *    <span class="label badge-primary">进行中</span>
 *
 * 6. 统计数据:
 *    <div class="statistic">1,234</div>
 *
 * 7. 链接:
 *    <a href="#" class="link">了解更多</a>
 *
 * 8. 错误提示:
 *    <p class="error-text">操作失败，请重试</p>
 *
 * 排版原则:
 * - 标题层级清晰，不超过 3 级
 * - 正文行高 1.4，确保可读性
 * - 辅助文本使用半透明度，区分层级
 * - 保持字重一致，避免过多变化
 */
